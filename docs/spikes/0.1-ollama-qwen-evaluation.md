# Spike 0.1: Ollama/Qwen 2.5 7B Response Quality Evaluation

**Sprint:** 0 - Infrastructure & Foundation
**Task:** 0.1 - Evaluate Ollama/Qwen response quality for scam assessment
**Date:** 23 January 2026
**Status:** In Progress
**Author:** Development Team

---

## Objective

Evaluate the suitability of **Qwen 2.5 7B Instruct (Q4_K_M quantized)** running via Ollama for the ScamAware Jersey chatbot. This spike assesses response quality, latency, and resource requirements to confirm the model meets project requirements before full implementation.

---

## Test Environment

### Hardware Configuration

| Component | Specification | Notes |
|-----------|---------------|-------|
| GPU | [To be filled] | Record actual hardware used |
| VRAM | [To be filled] | e.g., 8GB, 12GB |
| CPU | [To be filled] | Model and cores |
| RAM | [To be filled] | System memory |
| Storage | [To be filled] | SSD type |

### Software Configuration

| Component | Version | Notes |
|-----------|---------|-------|
| Ollama | [To be filled] | `ollama --version` |
| Model | qwen2.5:7b-instruct-q4_K_M | Q4_K_M quantization |
| OS | [To be filled] | Windows/Linux/macOS |
| Python | [To be filled] | For test script |

### Model Setup Commands

```bash
# Install Ollama (if not already installed)
# Windows: Download from https://ollama.com/download/windows
# Linux: curl -fsSL https://ollama.com/install.sh | sh

# Pull the model
ollama pull qwen2.5:7b-instruct-q4_K_M

# Verify model is available
ollama list

# Start Ollama server (usually auto-starts)
ollama serve
```

---

## Memory Requirements Analysis

### Expected Memory Usage

| Configuration | VRAM Required | System RAM Required |
|---------------|---------------|---------------------|
| Q4_K_M (4-bit) | ~5-6 GB | ~8 GB |
| Q5_K_M (5-bit) | ~6-7 GB | ~10 GB |
| Q8_0 (8-bit) | ~8-9 GB | ~12 GB |
| FP16 (full) | ~14 GB | ~16 GB |

### Notes on Quantization

- **Q4_K_M** is the recommended quantization for this project
- Provides good balance between quality and performance
- Fits comfortably on RTX 4060 (8GB) and RTX 4070 (12GB)
- Minimal quality degradation for conversational tasks

### Memory Monitoring

During testing, record:
- Peak VRAM usage: [To be filled]
- Idle VRAM usage: [To be filled]
- System RAM usage: [To be filled]
- Any OOM errors: [To be filled]

---

## Latency Benchmarks

### Target Performance

| Metric | Target | Acceptable | Unacceptable |
|--------|--------|------------|--------------|
| Time to First Token (TTFT) | <500ms | <1000ms | >2000ms |
| Total Response Time | <3s | <5s | >8s |
| Tokens per Second | >40 t/s | >25 t/s | <15 t/s |

### Measurement Methodology

1. **Cold Start Latency**: First request after model load
2. **Warm Start Latency**: Subsequent requests (model in memory)
3. **Under Load**: Multiple sequential requests
4. **Response Length Impact**: Compare short vs. long responses

### Latency Test Results Template

| Test Case | TTFT (ms) | Total Time (s) | Tokens Generated | Tokens/s | Pass/Fail |
|-----------|-----------|----------------|------------------|----------|-----------|
| Cold Start | [Result] | [Result] | [Result] | [Result] | [P/F] |
| Warm #1 | [Result] | [Result] | [Result] | [Result] | [P/F] |
| Warm #2 | [Result] | [Result] | [Result] | [Result] | [P/F] |
| ... | ... | ... | ... | ... | ... |

---

## Test Prompts: 20 Scam Assessment Scenarios

The following prompts cover the primary scam types identified in the PRD relevant to Jersey residents. Each prompt simulates a real user asking for help assessing a suspicious communication.

### Category 1: Bank/Financial Institution Impersonation (4 prompts)

**Prompt 1.1 - Classic Bank SMS Phishing**
```
I got this text message: "LLOYDS BANK: We have detected suspicious activity on your account. Your card has been temporarily blocked. To unblock, verify your details immediately at: bit.ly/lloyds-secure-verify. Failure to verify within 24 hours will result in permanent account suspension."

Is this a scam?
```

**Prompt 1.2 - Phone Call from "Bank Security"**
```
Someone called me saying they were from Barclays fraud department. They said there had been suspicious transactions on my account and they needed to verify my identity. They asked for my date of birth and the first and last digits of my PIN. I gave them my date of birth but hung up when they asked for the PIN. Did I do the right thing? Was this a scam?
```

**Prompt 1.3 - Email with Account Update Request**
```
I received an email that looks like it's from NatWest saying I need to update my online banking details or my account will be restricted. The email has their logo and looks professional. There's a button that says "Update Now". The sender email is security@natwest-online.com. Should I click it?
```

**Prompt 1.4 - JFSC Impersonation**
```
Got a letter in the post with JFSC letterhead saying my investment account needs urgent verification due to new regulations. It asks me to call a number and provide my account details for compliance purposes. The letter has official looking stamps and a reference number. Is this legitimate?
```

### Category 2: Investment/Cryptocurrency Fraud (4 prompts)

**Prompt 2.1 - Social Media Investment Opportunity**
```
Someone on Instagram messaged me about an investment opportunity. They say they can guarantee 300% returns in 30 days through cryptocurrency trading. They showed me screenshots of their profits and testimonials from other investors. They want me to start with just 500 pounds. What do you think?
```

**Prompt 2.2 - Clone Firm Investment**
```
I found an investment company online offering fixed returns of 8% per year. They say they're FCA registered and gave me a registration number. They want me to transfer money to their account in Jersey. The website looks professional with a London address. How can I check if they're legitimate?
```

**Prompt 2.3 - Pension Liberation Scheme**
```
A company called me about unlocking my pension early. They said I can access my pension pot before 55 without penalties through a legal loophole. They'd charge a 10% fee but I'd get the rest immediately. They're pressuring me to decide quickly as this offer ends soon. Is this real?
```

**Prompt 2.4 - Trading Platform Scam**
```
My friend told me about a trading platform called "ProfitMax" that he's been using. He says he's made thousands of pounds. I signed up and made a small deposit of 250 pounds. It showed I made 1200 pounds profit but when I tried to withdraw they said I need to pay a 15% tax fee first before I can get my money. Is this normal?
```

### Category 3: Romance/Relationship Scams (3 prompts)

**Prompt 3.1 - Online Dating Financial Request**
```
I've been talking to someone on a dating app for 3 months. We've never met in person but we video call sometimes. They say they're a engineer working on an oil rig. Now they're saying they need 2000 pounds urgently to get home because their company won't release their wages until the contract ends. They promise to pay me back. I really like them. What should I do?
```

**Prompt 3.2 - Social Media Relationship**
```
A woman added me on Facebook 2 months ago. She's been very friendly and sends me messages every day. She says she's from the US and wants to visit me in Jersey. Yesterday she said her mother is sick and needs surgery but her insurance won't cover it. She's asking if I can help with some of the medical bills. She sent me her passport and photos. Could this be a scam?
```

**Prompt 3.3 - Cryptocurrency Romance**
```
I met someone on Tinder who seems really nice. After a few weeks of chatting they started talking about how they make money trading Bitcoin. They showed me their portfolio and offered to teach me. They want me to download an app and invest together. They say we can build our future together with the profits. Is this suspicious?
```

### Category 4: Impersonation Scams - Authority Figures (3 prompts)

**Prompt 4.1 - Police Impersonation**
```
I got a phone call from someone claiming to be from the States of Jersey Police. They said my national insurance number has been used fraudulently and there's a warrant for my arrest. They said I need to pay a fine of 500 pounds immediately using gift cards to avoid being arrested today. I'm really scared. Is this real?
```

**Prompt 4.2 - HMRC Tax Scam**
```
I received an automated voicemail saying it's from HMRC and that I owe unpaid taxes. It said if I don't call back the number provided immediately, a warrant will be issued for my arrest. The message sounded very official with the HMRC name mentioned several times. Should I call them back?
```

**Prompt 4.3 - Government Grant Scam**
```
I got an email saying I'm eligible for a 3500 pound government grant because of COVID support programs. It says I need to provide my bank details so they can deposit the money. The email mentions official government programs and has what looks like an official reference number. It seems too good to be true but I could really use the money. Is this legitimate?
```

### Category 5: Purchase/Delivery Scams (3 prompts)

**Prompt 5.1 - Fake Delivery Notification**
```
Got a text saying: "Royal Mail: Your package is being held at our depot due to unpaid shipping fees of 2.99 pounds. Pay now to receive your delivery: royalmail-delivery-fee.com". I am expecting a package so this might be real. Should I pay?
```

**Prompt 5.2 - Online Marketplace Fraud**
```
I found a PS5 on Facebook Marketplace for 200 pounds. The seller says it's so cheap because they need money urgently for a family emergency. They want me to pay via bank transfer and say they'll post it to me. They won't do collection because they say they're self-isolating. Is this safe?
```

**Prompt 5.3 - Advance Fee Scam**
```
I'm trying to rent a flat in Jersey and found a great listing online. The landlord says he's currently abroad for work but can send me the keys if I transfer the deposit and first month's rent. He sent photos of the property and a copy of his passport. The rent is below market rate which he says is because he wants a reliable tenant quickly. Should I proceed?
```

### Category 6: Tech Support and Other Scams (3 prompts)

**Prompt 6.1 - Tech Support Popup**
```
A popup appeared on my computer saying "VIRUS DETECTED - Your computer is infected. Call Microsoft Support immediately at this number to prevent data loss." When I called, they asked me to download a program so they could remote access my computer to fix it. They want 299 pounds for the repair service. Is Microsoft actually contacting me?
```

**Prompt 6.2 - Prize/Lottery Scam**
```
I received an email saying I've won 50,000 euros in an international lottery. I don't remember entering any lottery. They say I need to pay a processing fee of 150 pounds and provide my ID to claim the prize. The email has a lot of official looking logos and stamps. Could this be real?
```

**Prompt 6.3 - Job Offer Scam**
```
I applied for jobs online and got an email offering me a position as a "payment processing agent" working from home. They say I'll receive payments into my bank account and forward them to their international partners, keeping 10% commission. It sounds easy but something feels off. Is this a legitimate job?
```

---

## Expected Response Characteristics

For each response, evaluate against these criteria:

### Content Quality Checklist

| Criterion | Description | Weight |
|-----------|-------------|--------|
| **Scam Indicators Identified** | Response identifies relevant red flags | High |
| **Non-Definitive Language** | Uses phrases like "shows warning signs", "appears suspicious" | Critical |
| **Jersey Context Awareness** | Mentions JFSC, local police when relevant | Medium |
| **Verification Guidance** | Suggests checking official sources | High |
| **Actionable Advice** | Clear next steps for the user | High |
| **Appropriate Empathy** | Acknowledges user's concern without enabling | Medium |
| **No Harmful Advice** | Never suggests paying, sharing details, or clicking links | Critical |
| **Appropriate Length** | Comprehensive but not overwhelming (100-300 words) | Medium |

### Red Flags the Model Should Identify

| Scam Type | Key Red Flags Model Should Mention |
|-----------|-----------------------------------|
| Bank Phishing | Urgency, suspicious links, request for PIN/passwords, generic greeting |
| Investment Fraud | Guaranteed returns, pressure tactics, unregistered companies |
| Romance Scam | Never met in person, sudden financial emergency, requests for money |
| Authority Impersonation | Payment via gift cards, arrest threats, immediate action required |
| Delivery Scam | Unexpected fees, suspicious URLs, urgency |
| Tech Support | Unsolicited contact, remote access requests, payment for free services |

### Response Scoring Template

For each test prompt, rate on a 1-5 scale:

| Metric | Score (1-5) | Notes |
|--------|-------------|-------|
| Scam indicators identified | | |
| Non-definitive language | | |
| Verification advice provided | | |
| Actionable recommendations | | |
| Appropriate tone | | |
| Response coherence | | |
| Jersey/local context | | |
| **Overall Score** | **/35** | |

---

## System Prompt for Testing

Use this system prompt when testing (matches planned production configuration):

```
You are a scam assessment assistant for ScamAware Jersey, a public service helping Jersey residents identify potential scams. Your role is to help users evaluate suspicious communications they have received.

CRITICAL RULES:
1. NEVER definitively state something IS or IS NOT a scam. Use phrases like:
   - "This shows several warning signs of a scam"
   - "This has characteristics commonly associated with fraud"
   - "This appears suspicious because..."

2. ALWAYS recommend verification through official channels:
   - Bank: Contact using the number on your card or official statement
   - JFSC: +44 (0)1534 822000 or jerseyfsc.org
   - Police: 01534 612612 for non-emergency fraud concerns
   - Emergency: 999

3. NEVER ask for or encourage sharing:
   - Passwords or PINs
   - Full card numbers
   - Bank account details
   - Personal identification documents

4. Stay STRICTLY on topic. You only discuss scam identification and guidance. Politely decline any other requests.

5. If someone has already lost money or shared sensitive information, express empathy and urgently direct them to:
   - Their bank immediately
   - States of Jersey Police: 01534 612612
   - Action Fraud: 0300 123 2040

Be helpful, clear, and empathetic. Jersey residents trust this service for guidance.
```

---

## Test Script Usage

The accompanying test script `scripts/test-ollama-quality.py` automates testing of all 20 prompts.

### Running the Tests

```bash
# Ensure Ollama is running
ollama serve

# Run the test script
cd docs/spikes
python scripts/test-ollama-quality.py

# Options
python scripts/test-ollama-quality.py --prompt 1    # Run single prompt
python scripts/test-ollama-quality.py --verbose     # Detailed output
python scripts/test-ollama-quality.py --output results.json  # Save results
```

### Test Output Format

The script produces:
- Response text for each prompt
- Latency measurements (TTFT, total time, tokens/s)
- Memory usage snapshots
- Aggregated statistics

---

## Results Documentation Template

### Summary Results

| Metric | Result | Target | Pass/Fail |
|--------|--------|--------|-----------|
| Average Response Time | [Result] | <3s | |
| 95th Percentile Latency | [Result] | <5s | |
| Average Tokens/Second | [Result] | >40 | |
| Peak VRAM Usage | [Result] | <8GB | |
| Quality Score Average | [Result]/35 | >28 | |

### Individual Test Results

[Copy the scoring template for each of the 20 prompts and fill in after testing]

### Issues Identified

1. [Issue description]
   - Severity: [High/Medium/Low]
   - Prompt(s) affected: [List]
   - Potential mitigation: [Suggestion]

2. ...

---

## Model Behavior & Limitations

### Observed Behaviors

Document any notable model behaviors during testing:

| Behavior | Description | Frequency | Concern Level |
|----------|-------------|-----------|---------------|
| [Behavior] | [Description] | [Rare/Occasional/Frequent] | [Low/Medium/High] |

### Known Limitations

1. **[Limitation Title]**
   - Description: [What the limitation is]
   - Impact: [How it affects the use case]
   - Mitigation: [How guardrails or prompting can address it]

### Prompt Engineering Notes

Document any prompt modifications that improved results:

- [Note 1]
- [Note 2]

---

## Conclusions and Recommendations

*[To be completed after testing]*

### Overall Assessment

[ ] **APPROVED** - Model meets requirements, proceed with implementation
[ ] **APPROVED WITH CONDITIONS** - Proceed with noted mitigations
[ ] **FURTHER TESTING REQUIRED** - Specific areas need additional evaluation
[ ] **NOT RECOMMENDED** - Consider alternative models

### Key Findings

1. [Finding 1]
2. [Finding 2]
3. [Finding 3]

### Recommended Configuration

Based on testing, the recommended production configuration is:

```yaml
model: qwen2.5:7b-instruct-q4_K_M
temperature: [Recommended value]
max_tokens: [Recommended value]
context_length: [Recommended value]
```

### Next Steps

1. [Action item 1]
2. [Action item 2]
3. [Action item 3]

---

## Appendix A: Raw Test Outputs

*[Attach full test script output here after running]*

## Appendix B: Alternative Models Tested

*[If testing alternative models, document results here]*

---

**Document Version History**

| Version | Date | Author | Changes |
|---------|------|--------|---------|
| 0.1 | 23 Jan 2026 | Dev Team | Initial spike document created |
